<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brainstem | 智能推薦</title>
    @@include('./layout/style.html')
    <!-- 以下可以放自己的link -->
</head>

<body>
    <!-- header -->
    @@include('./layout/header.html')

    <main class="AI_test">
        <!-- 請從這邊開始寫 -->
        <div id="particles-js">
        </div>
        <!-- 內容 -->
        <section class="AI_test_container">
            <div class="AI_test_wrapper" id="app">
                <!-- 3D方塊 -->
                <ul class="cube">
                    <li class="top"><img src="./pic/img/LOGO/LOGO.png"></li>
                    <li class="bottom"><img src="./pic/img/LOGO/LOGO.png"></li>
                    <li class="left"><img src="./pic/img/LOGO/LOGO.png"></li>
                    <li class="right"><img src="./pic/img/LOGO/LOGO.png"></li>
                    <li class="front"><img src="./pic/img/LOGO/LOGO.png"></li>
                    <li class="back"><img src="./pic/img/LOGO/LOGO.png"></li>
                </ul>

                <!-- 題目區塊 -->
                <div class="quiz_block">
                    <div class="quiz_number">
                        <h1>Q{{quiz.questionNum}}</h1>
                    </div>
                    <h1 class="quiz_question">{{quiz.question}}</h1>
                    <ul class="option_block">
                        <li class="option" v-for="single_option in quiz.option" @click="ChangeOption(single_option)">
                            {{single_option.opContent}}</li>
                    </ul>
                </div>
                <!-- 頁碼 -->
                <div class="AI_test_page">
                    <p>{{quiz.questionNum}} / {{question_length}}</p>
                </div>
                <a href="./AI_test_results.html">下一頁</a>
            </div>
        </section>

    </main>
    <!-- javascript -->
    @@include('./layout/js.html')
    <!-- 以下可以放自己的js -->
    <script src="./js/particles.js"></script>
    <script src="./js/app.js"></script>
    <script src="./vendors/vue/vue.global.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.3.6/axios.min.js"
        integrity="sha512-06NZg89vaTNvnFgFTqi/dJKFadQ6FIglD6Yg1HHWAUtVFFoXli9BZL4q4EO1UTKpOfCfW5ws2Z6gw49Swsilsg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        Vue.createApp({
            data() {
                return {
                    quiz: {
                        "questionNum": "1",
                        "question": "",
                        "option": [
                            {
                                "opContent": "",
                                "gameType": ""

                            },
                            {
                                "opContent": "",
                                "gameType": ""

                            },
                            {
                                "opContent": "",
                                "gameType": ""

                            },
                            {
                                "opContent": "",
                                "gameType": ""

                            }
                        ]
                    },
                    question_length: ""
                }
            },
            methods: {
                ChangeOption(single_option) {
                    console.log(this.quiz.questionNum);
                    console.log(this.question_length);
                    if (this.quiz.questionNum == this.question_length) {
                        location.href = "./AI_test_results.html";
                        return false
                    } else {
                        this.quiz.questionNum++
                        this.changeQuiz();
                        this.storeGameType(single_option)
                    }

                },
                changeQuiz() {
                    let AllQuizs = JSON.parse(localStorage.getItem("AllQuizs"));
                    this.quiz = AllQuizs[this.quiz.questionNum - 1];
                },
                storeGameType(single_option) {
                    let totalOp = JSON.parse(localStorage.getItem("options"));
                    if (totalOp) {
                        totalOp.push(single_option.gameType);
                        localStorage.setItem("options", JSON.stringify(totalOp));
                    } else {
                        totalOp = [single_option.gameType];
                    }
                }

            },
            mounted() {
                axios.get('./config/quizs.json')
                    .then((response) => {
                        localStorage.setItem("AllQuizs", JSON.stringify(response.data));
                        this.question_length = response.data.length;
                        this.changeQuiz();
                    })
            }
        }).mount("#app");
    </script>
</body>

</html>