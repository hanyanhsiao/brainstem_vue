<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brainstem | 遊戲資訊修改頁</title>
    @@include('./layout/style.html')
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>

<body class="B">
    <!-- header -->
    @@include('./layout/B_header.html')
    <main class="B_games_info_2">
        <!-- 左側選單列 -->
        @@include('./layout/B_nav.html')

        <!-- 右側 -->
        <div class="right col-12">
            <a href="./B_games_info.html">
                <h6>回上一頁</h6>
            </a>
            <div class="right_main">
                <form action="" method="">
                    <div class="B_button">
                        <h4>遊戲內容</h4>
                        <button class="btn">儲存</button>
                    </div>
                    <div class="right_main_top">
                        <ul>
                            <li>
                                <label for="gamesID">
                                    <h6>遊戲名稱</h6>
                                </label>
                                <input type="text" name="" id="gamesID" placeholder="請輸入遊戲名稱">
                            </li>
                            <li>
                                <h6>遊戲編號</h6>
                                <h6>123456789000</h6>
                            </li>
                            <li id="logo">
                                <label for="fileInput">
                                    <h6>遊戲封面</h6>
                                </label>
                                <img :src="imageUrl" alt="">
                                <input id="fileInput" type="file" @change="handleFileChange">
                            </li>
                            <li>
                                <h6>發行日期</h6>
                                <h6>2023/1/15</h6>
                            </li>
                            <li>
                                <h6>開發商</h6>
                                <h6>SQUARE ENIX</h6>
                            </li>
                            <li>
                                <h6>開發人員</h6>
                                <h6>LBJ</h6>
                            </li>
                            <li>
                                <h6>遊戲級別</h6>
                                <h6>保護級</h6>
                            </li>
                            <li class="B_grid_two b_backend_color">
                                <h6>遊戲類型</h6>
                                <div class="B_games">
                                    <ul>
                                        <li>
                                            <input type="checkbox" name="" id="action">
                                            <label for="action">動作</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="adventure">
                                            <label for="adventure">冒險</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="role">
                                            <label for="role">角色扮演</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="tactful">
                                            <label for="tactful">策略</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="simulation
                                            ">
                                            <label for="simulation
                                            ">模擬</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="prosecution
                                            ">
                                            <label for="prosecution
                                            ">經營</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="building">
                                            <label for="building">城市營造</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="farm simulation">
                                            <label for="farm simulation">農場模擬</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="war">
                                            <label for="war">戰爭</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="casual">
                                            <label for="casual">休閒</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="japanese">
                                            <label for="japanese">日系</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="sports">
                                            <label for="sports">運動</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="baseball">
                                            <label for="baseball">棒球</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="tennis">
                                            <label for="tennis">網球</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="racing">
                                            <label for="racing">競速</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="race">
                                            <label for="race">賽馬</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="racing car">
                                            <label for="racing car">賽車</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="cooking">
                                            <label for="cooking">烹飪</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="cute">
                                            <label for="cute">可愛</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="child">
                                            <label for="child">兒童</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="space simulation">
                                            <label for="space simulation">太空模擬</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="colony simulation">
                                            <label for="colony simulation">殖民模擬</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="pixel wind">
                                            <label for="pixel wind">像素風</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="2D fighting">
                                            <label for="2D fighting">2D格鬥</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="independent game">
                                            <label for="independent game">獨立遊戲</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" name="" id="">
                                            <label for="">待新增</label>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                            <li class="B_grid_two b_backend_color">
                                <h6>活動類型</h6>
                                <div class="B_type">
                                    <ul>
                                        <li>
                                            <input type="radio" name="type" id="summer sale">
                                            <label for="summer sale">夏季特賣</label>
                                        </li>
                                        <li>
                                            <input type="radio" name="type" id="Cosplay Promotions">
                                            <label for="Cosplay Promotions">角色扮演促銷活動</label>
                                        </li>
                                        <li>
                                            <input type="radio" name="type" id="Shooting Type Promotions">
                                            <label for="Shooting Type Promotions">射擊類型促銷活動</label>
                                        </li>
                                        <li>
                                            <input type="radio" name="type" id="Space Adventure Promotions">
                                            <label for="Space Adventure Promotions">太空探險促銷活動</label>
                                        </li>
                                        <li>
                                            <input type="radio" name="type" id="Horror Game Promotions">
                                            <label for="Horror Game Promotions">恐怖遊戲促銷活動</label>
                                        </li>
                                        <li>
                                            <input type="radio" name="type" id="Cairo Series Promotions">
                                            <label for="Cairo Series Promotions">開羅系列促銷活動</label>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                            <li class="B_grid_four">
                                <label for="Event start time">
                                    <h6>活動開始時間</h6>
                                </label>
                                <input id="myDatePicker" type="date" name="" id="Event start time" placeholder="年/月/日">
                                <label for="Event end time">
                                    <h6>活動結束時間</h6>
                                </label>
                                <input id="myDatePicker" type="date" name="" id="Event end time" placeholder="年/月/日">
                            </li>
                            <li>
                                <label for="commodity price">
                                    <h6>商品金額</h6>
                                </label>
                                <input type="text" name="" id="commodity price" placeholder="請輸入金額">
                            </li>
                            <li class="B_grid_six">
                                <label for="Product discount">
                                    <h6>商品折扣</h6>
                                </label>
                                <input type="text" name="" id="Product discount" placeholder="請輸入折扣%數">
                                <label for="Discount start time">
                                    <h6>折扣開始時間</h6>
                                </label>
                                <input id="myDatePicker" type="date" name="" id="Discount start time"
                                    placeholder="年/月/日">
                                <label for="Discount end time">
                                    <h6>折扣結束時間</h6>
                                </label>
                                <input id="myDatePicker" type="date" name="" id="Discount end time" placeholder="年/月/日">
                            </li>
                            <li class="B_grid_two">
                                <label for="game instructions">
                                    <h6>遊戲說明</h6>
                                </label>
                                <textarea name="" id="game instructions" cols="100" rows="20"
                                    placeholder="請輸入遊戲說明"></textarea>
                            </li>
                            <li class="B_grid_two">
                                <label for="system requirement">
                                    <h6>系統需求</h6>
                                </label>
                                <textarea name="" id="system requirement" cols="100" rows="30"
                                    placeholder="請輸入系統需求"></textarea>
                            </li>
                        </ul>
                    </div>
                    <div class="games_info_2_down">
                        <h6>遊戲圖片</h6>
                        <div id="B_upload_pic">
                            <input v-if="!images.length || images[images.length - 1].saved" type="file"
                                @change="handleFileUpload" multiple>
                            <ul>
                                <li v-for="(image, index) in images" :key="index">
                                    <img :src="image.url" :alt="image.name">
                                    <input type="text" v-model="image.description" placeholder="輸入圖片說明"
                                        v-show="!image.saved">
                                    <h6 v-if="image.saved">{{ image.description }}</h6>
                                    <template v-if="!image.saved">
                                        <button @click="saveImage(index, $event)">保存</button>
                                    </template>
                                    <template v-else>
                                        <button @click="startEditing(index, $event)">編輯</button>
                                        <button @click="deleteImage(index, $event)">刪除</button>
                                    </template>
                                    <template v-if="image.editMode">
                                        <input type="text" v-model="image.description" placeholder="輸入圖片說明">
                                        <button @click="updateImage(index, $event)">更新</button>
                                        <button @click="cancelEdit(index, $event)">取消</button>
                                    </template>
                                </li>
                            </ul>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="./layout/js.html"></script>
    <script src="./vendors/vue/vue.global.js"></script>
    <script>
        //input
        flatpickr("#myDatePicker", {
            dateFormat: "Y/m/d",
            minDate: "today",
            theme: "light"
        });
    </script>

    <script>
        //圖文說明
        Vue.createApp({
            data() {
                return {
                    images: []
                };
            },
            methods: {
                handleFileUpload(event) {
                    const files = event.target.files;
                    for (let i = 0; i < files.length; i++) {
                        const file = files[i];
                        const reader = new FileReader();
                        reader.onload = () => {
                            const newImage = {
                                url: reader.result,
                                name: file.name,
                                description: '',
                                saved: false,
                                editMode: false
                            };
                            this.images.push(newImage);
                        };
                        reader.readAsDataURL(file);
                    }
                    event.target.value = ''; // 清除文件选择的输入框的值
                },
                saveImage(index, event) {
                    event.preventDefault();
                    this.images[index].saved = true;
                    this.images[index].editMode = false;
                },
                startEditing(index, event) {
                    event.preventDefault();
                    this.images[index].editMode = true;
                },
                updateImage(index, event) {
                    event.preventDefault();
                    this.images[index].editMode = false;
                },
                cancelEdit(index, event) {
                    event.preventDefault();
                    this.images[index].editMode = false;
                    this.images[index].description = '';
                },
                deleteImage(index, event) {
                    event.preventDefault();
                    this.images.splice(index, 1);
                }
            }
        }).mount('#B_upload_pic');
    </script>


    <script>
        Vue.createApp({
            data() {
                return {
                    imageUrl: ''
                };
            },
            methods: {
                handleFileChange(event) {
                    const file = event.target.files[0];
                    const reader = new FileReader();

                    reader.onload = (e) => {
                        this.imageUrl = e.target.result;
                    };

                    reader.readAsDataURL(file);
                }
            }
        }).mount("#logo")
    </script>

</html>