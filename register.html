<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brainstem | 會員註冊</title>
    @@include('./layout/style.html')
    <!-- 以下可以放自己的link -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>

<body>
    <!-- header -->
    @@include('./layout/header.html')
    <main class="register ">
        <section class="register_block col-10">
            <div class="log_title">
            <div class="logo"></div>
            <h2>會員註冊</h2>
            </div>
            <form action="" class="margin ">
                <div class="left col-7">
                <label for="name">姓名</label>
                <input type="text" id="name" placeholder="請輸入姓名">
                <label for="nickname">暱稱</label>
                <input type="text" id="nickname" placeholder="請輸入暱稱">
                <label for="phone">電話號碼</label>
                <input type="text" id="phone" placeholder="請輸入電話號碼">
                <label for="birth" class="birth">
                    <p>生日</p>
                    <input type="text" id="dob" placeholder="請選擇下方日期" disabled>
                </label>
                  <p class="margin"> 性別 </p>
                <div for="gender" class="gender">
                    <label><input type="radio" name="gender" value="male">男性</label>
                    <label><input type="radio" name="gender" value="female">女性</label>
                    <label><input type="radio" name="gender" value="unknow">不公開</label>
            </div>
            </div>
            <div class="right col-7">
                <label for="account">會員帳號（電子信箱）</label>
                <input type="text" id="account" placeholder="請輸入會員帳號（電子信箱）">
                <label for="password_1">密碼</label>
                <input type="password" id="password_1" placeholder="請輸入密碼）">
                <label for="password_2">請再次輸入密碼</label>
                <input type="password" id="password_2" placeholder="請再次輸入密碼">
            </div>
            <button type="submit" class="btn">註冊</button>
            </form>
        </section>

    </main>
    <!-- javascript -->
    @@include('./layout/js.html')
    <!-- 以下可以放自己的js -->
    <script>
        // note: this is not a drop-in solution yet, merely a demo, with an id instead of reusable class for the wrapper etc.
        const showOriginalFieldForDemo = true;

        const isAndroid = true;
        // see https://codepen.io/Connum/pen/xxPVQQO?editors=0010
        // for detection

        const fieldDateOfBirth = document.getElementById('dob');
        const fieldStyle = window.getComputedStyle(fieldDateOfBirth);
        let month_names = [ 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December' ];

        // use localized month names
        if ( window.Intl && window.Intl.DateTimeFormat ) {
            try {
                var formatter = new window.Intl.DateTimeFormat([], { month: 'long', timeZone: 'UTC' });
                var months = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12].map(month => {
                var mm = month < 10 ? '0' + month : month;
                return new Date('0000-' + mm + '-01T00:00:00+00:00');
                });
                month_names = months.map(date => formatter.format(date));
            } catch(e) {}
        }

        if ( isAndroid ) {
        const dateWrapper = document.createElement('div');
        dateWrapper.id = 'date-select-wrapper';
        fieldDateOfBirth.parentNode.appendChild(dateWrapper);

        const dateFieldDay = document.createElement('select');
        const dateFieldMonth = document.createElement('select');
        const dateFieldYear = document.createElement('select');

        const dateFields = [dateFieldYear, dateFieldMonth, dateFieldDay];

        // copy over styles from text input
        if ( fieldStyle ) {
            var styleOptions = [ 'boxSizing', 'backgroundColor', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'height', 'font', 'verticalAlign' ];
            styleOptions.forEach( function( s ) {
            if ( fieldStyle[s] ) {
                dateFields.forEach( function( f ) {
                f.style[s] = fieldStyle[s];
                } );
            }
            });
        }

        const emptyDayOption = document.createElement('option');
        emptyDayOption.value = '';
        emptyDayOption.textContent = '日';
        dateFieldDay.add(emptyDayOption);
        const emptyMonthOption = document.createElement('option');
        emptyMonthOption.value = '';
        emptyMonthOption.textContent = '月';
        dateFieldMonth.add(emptyMonthOption);
        const emptyYearOption = document.createElement('option');
        emptyYearOption.value = '';
        emptyYearOption.textContent = '年';
        dateFieldYear.add(emptyYearOption);

        const dayOptions = [emptyDayOption];
        for ( var i = 1; i <= 31; i++ ) {
            var newOption = document.createElement('option');
            newOption.value = ( i < 10 ? '0' : '' ) + i;
            newOption.textContent = i;
            dayOptions.push( newOption );
            dateFieldDay.add( newOption );
        }

        const monthOptions = [emptyMonthOption];
        for ( var i = 0; i < month_names.length; i++ ) {
            var newOption = document.createElement('option');
            newOption.value = ( i < 9 ? '0' : '' ) + ( i + 1 );
            newOption.textContent = month_names[i];
            monthOptions.push(newOption);
            dateFieldMonth.add(newOption);
        }

        const yearEnd = new Date().getFullYear();
        const yearStart = yearEnd - 120;
        const yearOptions = [emptyYearOption];
        for (var i = yearEnd; i >= yearStart; i--) {
            var newOption = document.createElement('option');
            newOption.value = i;
            newOption.textContent = i;
            yearOptions.push(newOption);
            dateFieldYear.add(newOption);
        }

        dateWrapper.appendChild(dateFieldDay);
        dateWrapper.appendChild(dateFieldMonth);
        dateWrapper.appendChild(dateFieldYear);

        const dateChangeHandler = function() {
            // var day = parseInt( dateFieldDay.value, 10 );
            const month = parseInt( dateFieldMonth.value, 10 );
            const year = parseInt( dateFieldYear.value, 10 );
            let maxDays = 31;

            if ( month === 2 ) {
            const isLeapYear = ((year % 4 == 0) && (year % 100 != 0)) || (year % 400 == 0)
            maxDays = isLeapYear ? 29 : 28;
            } else if ( [2, 4, 6, 9, 11].indexOf( month ) >= 0 ) {
            maxDays = 30;
            }

            dayOptions.filter(function( o, i ) {
            o.hidden = i > maxDays;
            if ( o.hidden && o.selected ) {
                emptyDayOption.selected = true;
            }
            });

            let allSet = true;
            dateFields.forEach(field => {
            const isEmpty = ! field.value;
            if ( isEmpty ) {
                allSet = false;
            }
            field.classList[isEmpty ? 'add' : 'remove']('show-placeholder');
            });

            if ( allSet ) {
            fieldDateOfBirth.value = dateFields.map(function(field) {
                return field.value;
            }).join('-');
            } else {
            fieldDateOfBirth.value = '';
            }
        };

        // if the original input already has a value, set the selected options accordingly
        if ( fieldDateOfBirth.value ) {
            const ymd = fieldDateOfBirth.value.split('-');
            yearOptions.filter(function(o) {
            if ( o.value === ymd[0]) {
                o.selected = true;
            }
            });
            monthOptions[parseInt(ymd[1], 10)].selected = true;
            dayOptions[parseInt(ymd[2], 10)].selected = true;
        }

        dateFieldDay.addEventListener( 'change', dateChangeHandler );
        dateFieldMonth.addEventListener( 'change', dateChangeHandler );
        dateFieldYear.addEventListener( 'change', dateChangeHandler );
        dateChangeHandler();

        // do this last, so in case anything throws an error, we still have the input as a fallback
        if ( ! showOriginalFieldForDemo ) {
            fieldDateOfBirth.type = 'hidden';
        }
        }
      </script>
</body>

</html>